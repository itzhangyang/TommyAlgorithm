# åµŒå¥—ç»“æ„çš„éå†/åºåˆ—åŒ–/ååºåˆ—åŒ– - æ ˆ

`NestedInteger` æ˜¯ä¸€ç±»**é€’å½’æ•°æ®ç»“æ„**ï¼Œç›¸å…³é—®é¢˜ä¸»è¦è€ƒå¯Ÿä¸‰ä¸ªæ–¹å‘ï¼š

- **è§£æå­—ç¬¦ä¸²ï¼ˆååºåˆ—åŒ–ï¼‰**
- **ç”Ÿæˆå­—ç¬¦ä¸²ï¼ˆåºåˆ—åŒ–ï¼‰** 
- **éå†æ•°æ®ç»“æ„ï¼ˆè¿­ä»£å™¨ï¼‰**ã€‚

##åµŒå¥—ç»“æ„çš„éå† -Leetcode 341

###é—®é¢˜è¦ç‚¹

**è¾“å…¥**: ä¸€ä¸ªåµŒå¥—çš„æ•´æ•°åˆ—è¡¨ `List<NestedInteger>`ï¼Œä¾‹å¦‚ `[[1,1], 2, [1,[3]]]`ã€‚

**`NestedInteger` æ¥å£**: è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ¥å£ï¼Œå…¶å®ä¾‹ï¼š

- è¦ä¹ˆåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼ˆ`isInteger()` è¿”å› `true`ï¼Œ`getInteger()` è·å–è¯¥æ•´æ•°ï¼‰ï¼Œ
- è¦ä¹ˆåŒ…å«ä¸€ä¸ªåµŒå¥—çš„åˆ—è¡¨ï¼ˆ`isInteger()` è¿”å› `false`ï¼Œ`getList()` è·å–è¯¥åˆ—è¡¨ï¼‰ã€‚

**è¾“å‡º**: è¦æ±‚å®ç°ä¸€ä¸ªè¿­ä»£å™¨ `NestedIterator`ï¼Œå®ƒèƒ½å°†è¿™ä¸ªåµŒå¥—åˆ—è¡¨â€œæ‰å¹³åŒ–â€åï¼ŒæŒ‰é¡ºåºéå†å…¶ä¸­çš„æ‰€æœ‰æ•´æ•°ã€‚

å¯¹äºä¸Šè¿°ä¾‹å­ï¼Œè¿­ä»£å™¨åº”ä¾æ¬¡è¿”å› `1, 1, 2, 1, 3`

**è¿­ä»£å™¨æ¥å£**: éœ€è¦å®ç°ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š

- `next()`: è¿”å›ä¸‹ä¸€ä¸ªæ•´æ•°ã€‚
- `hasNext()`: åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªæ•´æ•°ã€‚

**æ ¸å¿ƒè¦æ±‚**: è¿­ä»£å™¨éœ€è¦**æƒ°æ€§æ±‚å€¼ (Lazy Evaluation)**ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œ**ä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•´æ•°éƒ½å–å‡ºæ¥å­˜å…¥ä¸€ä¸ªçº¿æ€§æ•°æ®ç»“æ„**ã€‚

åº”è¯¥åœ¨è°ƒç”¨ `hasNext()` æˆ– `next()` æ—¶ï¼Œæ‰å»å¯»æ‰¾ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚è¿™å¯¹äºå¤„ç†è¶…å¤§è§„æ¨¡æˆ–æ— é™æ·±åº¦çš„åµŒå¥—åˆ—è¡¨è‡³å…³é‡è¦ã€‚

###é—®é¢˜æœ¬è´¨å’Œåˆ†æ - æ ‘å½¢ç»“æ„/é€’å½’ç»“æ„

é—®é¢˜çš„æœ¬è´¨æ˜¯å°†ä¸€ä¸ªæ ‘å½¢ç»“æ„/é€’å½’ç»“æ„è½¬åŒ–æˆä¸€ä¸ªçº¿æ€§åºåˆ—çš„è§†å›¾ï¼Œå¹¶é€šè¿‡è¿­ä»£å™¨çš„æ–¹å¼é€ä¸ªè®¿é—®ã€‚

ç›´æ¥çš„æŒ‘æˆ˜åœ¨äºï¼š

- **æ•°æ®ç»“æ„çš„éçº¿æ€§**: æˆ‘ä»¬ä¸èƒ½åƒéå†æ™®é€šæ•°ç»„é‚£æ ·ç”¨ä¸€ä¸ªç®€å•çš„ç´¢å¼•ã€‚
- **æ·±åº¦çš„ä¸ç¡®å®šæ€§**: åˆ—è¡¨å¯èƒ½åµŒå¥—ä»»æ„å¤šå±‚ã€‚
- **è¿­ä»£å™¨çš„ç‰¹æ€§**: `hasNext()` å’Œ `next()` æ–¹æ³•è¦æ±‚æˆ‘ä»¬èƒ½â€œæš‚åœâ€å’Œâ€œæ¢å¤â€éå†è¿‡ç¨‹ã€‚æˆ‘ä»¬ä¸èƒ½ç”¨ä¸€ä¸ªç®€å•çš„é€’å½’å‡½æ•°ä¸€æ¬¡æ€§è§£å†³ï¼Œå› ä¸ºé€’å½’ä¼šæ‰§è¡Œåˆ°åº•ã€‚

ä¸ºäº†è§£å†³**æš‚åœ**å’Œ**æ¢å¤**çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ¥ä¿å­˜**éå†çš„â€œçŠ¶æ€â€æˆ–â€œä¸Šä¸‹æ–‡â€**ã€‚

å½“é‡åˆ°ä¸€ä¸ªåµŒå¥—åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¿›å…¥è¿™ä¸ªåˆ—è¡¨è¿›è¡Œéå†ï¼›

éå†å®Œåï¼Œè¦èƒ½å›åˆ°**ä¸Šä¸€å±‚åˆ—è¡¨ç»§ç»­**ã€‚

è¿™ç§**åè¿›å…ˆå‡º**ï¼ˆLIFOï¼‰çš„è¡Œä¸ºæ¨¡å¼ï¼Œå®Œç¾åœ°æŒ‡å‘äº†**æ ˆï¼ˆStackï¼‰**ã€‚

å› æ­¤ï¼Œè¿™ä¸ªé—®é¢˜çš„æœ¬è´¨å¯ä»¥è½¬åŒ–ä¸ºï¼š**ä½¿ç”¨æ ˆæ¥å®ç°å¯¹ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰çš„è¿­ä»£å¼éå†**ã€‚

###æ¨¡å¼åŒ¹é…

####è¿­ä»£å™¨è®¾è®¡æ¨¡å¼

è¿™æ˜¯æœ€è¡¨å±‚çš„æ¨¡å¼ã€‚é¢˜ç›®è¦æ±‚æˆ‘ä»¬éšè—å¤æ‚æ•°æ®ç»“æ„ï¼ˆåµŒå¥—åˆ—è¡¨ï¼‰çš„å†…éƒ¨å®ç°ï¼Œå¹¶æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ (`hasNext`, `next`) æ¥é¡ºåºè®¿é—®å…¶å…ƒç´ ã€‚

####æ·±åº¦ä¼˜å…ˆæœç´¢

éå†åµŒå¥—åˆ—è¡¨çš„é€»è¾‘å°±æ˜¯ DFSã€‚å½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªå­åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬ä¼šæ·±å…¥ï¼ˆdepth-firstï¼‰åˆ°è¿™ä¸ªå­åˆ—è¡¨ä¸­è¿›è¡Œæ¢ç´¢ã€‚

####ä½¿ç”¨æ ˆå®ç°æ·±åº¦ä¼˜å…ˆæœç´¢

è¿™æ˜¯å°†é€’å½’ DFS ç®—æ³•è½¬åŒ–ä¸ºè¿­ä»£å½¢å¼çš„æ ‡å‡†æ¨¡å¼ã€‚

é€’å½’éšå¼åœ°ä½¿ç”¨äº†è°ƒç”¨æ ˆï¼Œè€Œæˆ‘ä»¬é€šè¿‡æ˜¾å¼åœ°ä½¿ç”¨ä¸€ä¸ª `Stack` æ•°æ®ç»“æ„æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œä»è€Œå¯ä»¥è‡ªç”±åœ°æ§åˆ¶**éå†çš„æš‚åœå’Œç»§ç»­**ï¼Œå®Œç¾å¥‘åˆè¿­ä»£å™¨çš„éœ€æ±‚ã€‚

###æ ¸å¿ƒæ€æƒ³å’Œå¥—è·¯ - åŸºäºæ ˆçš„æ·±åº¦ä¼˜å…ˆæœç´¢

æ ¸å¿ƒæ€æƒ³æ˜¯**ä½¿ç”¨ä¸€ä¸ªæ ˆæ¥ç»´æŠ¤å¾…å¤„ç†çš„ `NestedInteger` å¯¹è±¡**ã€‚

æ ˆé¡¶æ°¸è¿œæ˜¯**ä¸‹ä¸€ä¸ªéœ€è¦è¢«æ£€æŸ¥çš„å…ƒç´ **ã€‚

è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦ä¸”å¸¸ç”¨çš„è¿­ä»£å™¨å®ç°å¥—è·¯ã€‚

####HasNextçš„èŒè´£ - å¤„ç†æ ˆé¡¶å…ƒç´ 

##### æ ˆé¡¶å…ƒç´ æ˜¯æ•´æ•°çš„æƒ…å†µ

- å¦‚æœæ ˆé¡¶å…ƒç´ æ˜¯æ•´æ•°ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç›´æ¥è¿”å›`true`

##### æ ˆé¡¶å…ƒç´ æ˜¯åˆ—è¡¨çš„æƒ…å†µ - å°†æ ˆé¡¶å…ƒç´ å»é™¤å¹¶é€†åºå‹å…¥æ ˆ

- å¦‚æœæ ˆé¡¶å…ƒç´ æ˜¯åˆ—è¡¨ï¼Œè¯´æ˜éœ€è¦è¿›ä¸€æ­¥**æ·±å…¥**ï¼š

  - å°†è¯¥åˆ—è¡¨ä»æ ˆä¸­**å¼¹å‡º**

  - å°†å…¶åŒ…å«çš„å…ƒç´ **é€†åº**å‹å…¥æ ˆä¸­ã€‚

    > å› ä¸ºæ ˆæ˜¯åè¿›å…ˆå‡ºï¼Œä¸ºäº†ä¿è¯èƒ½å¤ŸæŒ‰ç…§åŸæ¥åˆ—è¡¨çš„é¡ºåºï¼Œå…¥æ ˆæ—¶å¿…é¡»ä»ååˆ°å‰

  - é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°

    - æ ˆé¡¶æ‰¾åˆ°ä¸€ä¸ªæ•´æ•°ï¼Œæˆ–è€…
    - æ ˆä¸ºç©º

####nextçš„èŒè´£

- å‡è®¾`hasNext`å·²ç»è¢«è°ƒç”¨è¿‡ï¼Œå¹¶ä¸”è¿”å›äº†`true`

- ç›´æ¥å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶è¿”å›å…¶å€¼


è¿™ä¸ª**åœ¨ `hasNext()` ä¸­åšå‡†å¤‡å·¥ä½œï¼Œåœ¨ `next()` ä¸­ç›´æ¥å–ç”¨**çš„æ¨¡å¼ï¼Œä¿è¯äº† `hasNext()` çš„å¹‚ç­‰æ€§ï¼ˆå¤šæ¬¡è°ƒç”¨ä¸æ”¹å˜çŠ¶æ€ï¼‰ï¼Œå¹¶ä¸”é€»è¾‘æ¸…æ™°ã€‚

###å®ç°åŸç†å’Œæ­¥éª¤

####æ ˆçš„å®šä¹‰å’Œåˆå§‹åŒ–

åœ¨ `NestedIterator` ç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªç§æœ‰æˆå‘˜å˜é‡ `private Stack<NestedInteger> stack`ã€‚

å°† `nestedList` ä¸­çš„å…ƒç´ **ä»åå¾€å‰**ï¼ˆä» `list.size() - 1`åˆ° `0`ï¼‰ä¾æ¬¡å‹å…¥æ ˆä¸­ã€‚

è¿™æ ·ï¼Œåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±åœ¨æ ˆé¡¶ï¼Œä¿è¯äº†æ­£ç¡®çš„å¤„ç†é¡ºåºã€‚

####HasNextæ–¹æ³•çš„å®ç°

è¿›å…¥ä¸€ä¸ª`while`å¾ªç¯ï¼Œæ¡ä»¶ä¸º`!stack.isEmpty()`,åœ¨å¾ªç¯ä¸­æ£€æŸ¥æ ˆé¡¶å…ƒç´ ï¼š

- å¦‚æœæ ˆé¡¶å…ƒç´ ä¸ºæ•´æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯æˆ‘ä»¬æ‰€è¦æ‰¾çš„ä¸‹ä¸€ä¸ªæ•°å­—ï¼Œç›´æ¥è¿”å›`true`

- å¦‚æœæ ˆé¡¶å…ƒç´ ä¸ºåˆ—è¡¨ï¼š

  - å°†åˆ—è¡¨ä»æ ˆé¡¶å¼¹å‡º:`NestedInteger listNode = stack.pop()`
  - è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ :`List<NestedInteger> subList = listNode.getList()`
  - å°†subList**ä»åå¾€å‰**ä¾æ¬¡å‹å…¥æ ˆä¸­

- ç»§ç»­æ£€æŸ¥æ–°çš„æ ˆé¡¶å…ƒç´ ï¼š

  - å¦‚æœ`while`å¾ªç¯æ­£å¸¸ç»“æŸï¼Œé‚£ä¹ˆè¯´æ˜æ ˆå·²ç»ç©ºäº†ï¼Œè¯´æ˜éå†äº†æ‰€æœ‰çš„å…ƒç´ éƒ½æ²¡æœ‰æ‰¾åˆ°æ•´æ•°ï¼Œåˆ™ç›´æ¥è¿”å›`false`


####nextæ–¹æ³•çš„å®ç°

æŒ‰ç…§è¿­ä»£å™¨è§„èŒƒ, 

- å¦‚æœ`hashNext`ä¸º`false`ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼ˆåœ¨é¢˜ç›®ä¸­å‡è®¾éƒ½æ˜¯ğŸˆ¶å…ƒç´ çš„ï¼‰
- ç›´æ¥`stack.pop()`å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼ˆ**hashNexté€»è¾‘å·²ç»ä¿è¯å®ƒä¸ºä¸€ä¸ªæ•´æ•°**ï¼‰
- è°ƒç”¨`.getInteger()`è·å–å®ƒçš„æ•°å€¼å¹¶è¿”å›

###å®ç°ä»£ç 

```java
public class NestedIterator implements Iterator<Integer> {
    Stack<NestedInteger> stack ;

    public NestedIterator(List<NestedInteger> nestedList) {
        stack = new Stack<>();
        //å°†åˆ—è¡¨ä¸­æ‰€æœ‰NIå…ƒç´ é€†åºå‹å…¥æ ˆä¸­
        for(int i = nestedList.size() - 1; i >= 0; i--){
            NestedInteger ni = nestedList.get(i);
            stack.push(ni);
        }
    }

    @Override
    public Integer next() {
        return stack.pop().getInteger();
    }

    @Override
    public boolean hasNext() {
        //ä½¿ç”¨whileè¿›è¡Œå¾ªç¯
        while (!stack.isEmpty()) {
          //å¦‚æœå½“å‰æ ˆé¡¶ä¸ºæ•´æ•°ï¼Œç›´æ¥è¿”å›true
            if(stack.peek().isInteger()){
                return true;
            }else{
              //å¦åˆ™å–å‡ºlistå¹¶é€†åºåŠ å…¥æ ˆä¸­
                NestedInteger top = stack.pop();
                List<NestedInteger> list = top.getList();
                for(int i = list.size() - 1; i >= 0; i--){
                    stack.push(list.get(i));
                }
            }
        }
        return false;
    }
}
```

###æ³¨æ„äº‹é¡¹

**é€†åºå…¥æ ˆ**: è¿™æ˜¯ä¿è¯éå†é¡ºåºæ­£ç¡®çš„å…³é”®ã€‚æ— è®ºæ˜¯æ„é€ å‡½æ•°è¿˜æ˜¯åœ¨ `hasNext` ä¸­å±•å¼€åˆ—è¡¨ï¼Œéƒ½å¿…é¡»å°†å…ƒç´ ä»åå¾€å‰æ¨å…¥æ ˆä¸­ã€‚

**`hasNext()` çš„å¹‚ç­‰æ€§**: å®ç°çš„ `hasNext()` åªè¦æ ˆé¡¶æœ‰æ•´æ•°ï¼Œå°±ä¼šç«‹å³è¿”å› `true`ï¼Œä¸ä¼šæ”¹å˜æ ˆçš„çŠ¶æ€ã€‚åªæœ‰å½“æ ˆé¡¶æ˜¯åˆ—è¡¨æ—¶ï¼Œå®ƒæ‰ä¼šä¿®æ”¹æ ˆã€‚å¤šæ¬¡è°ƒç”¨ `hasNext()` è€Œä¸è°ƒç”¨ `next()`ï¼Œç»“æœåº”è¯¥å§‹ç»ˆç›¸åŒï¼Œä¸”ä¸ä¼šâ€œè·³è¿‡â€å…ƒç´ ã€‚æˆ‘ä»¬çš„å®ç°ç¬¦åˆè¿™ä¸ªè¦æ±‚ã€‚

**ç©ºåˆ—è¡¨å¤„ç†**: `hasNext()` çš„é€»è¾‘å¯ä»¥ä¼˜é›…åœ°å¤„ç†ç©ºåˆ—è¡¨æˆ–åªåŒ…å«ç©ºåˆ—è¡¨çš„åµŒå¥—åˆ—è¡¨ã€‚å¦‚æœä¸€ä¸ªåˆ—è¡¨æ˜¯ç©ºçš„ï¼Œ`for` å¾ªç¯ä¸ä¼šæ‰§è¡Œï¼Œ`while` å¾ªç¯ä¼šç»§ç»­å¤„ç†æ ˆä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°æ•´æ•°æˆ–æ ˆä¸ºç©ºã€‚

**æ¥å£ä¸å®ç°**: æ³¨æ„é¢˜ç›®æä¾›çš„æ˜¯ `NestedInteger` æ¥å£ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å®ƒçš„ `isInteger()`, `getInteger()`, `getList()` æ–¹æ³•ï¼Œæ— éœ€å…³å¿ƒå…¶å…·ä½“å®ç°ã€‚

###ç»éªŒæ€»ç»“

1. **è¯†åˆ«é—®é¢˜çš„æ ¸å¿ƒ**: LeetCode 341 è¡¨é¢ä¸Šæ˜¯å®ç°ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½†å…¶æ ¸å¿ƒæ˜¯**æ ‘çš„è¿­ä»£å¼æ·±åº¦ä¼˜å…ˆéå†**ã€‚èƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«å‡ºè¿™ä¸€ç‚¹æ˜¯è§£é¢˜çš„å…³é”®ã€‚
2. **æ ˆæ˜¯é€’å½’çš„æ›¿ä»£å“**: å½“ä¸€ä¸ªé—®é¢˜å¯ä»¥ç”¨é€’å½’è§£å†³ï¼Œä½†åˆéœ€è¦â€œæš‚åœ-æ¢å¤â€çš„æ§åˆ¶æµæ—¶ï¼ˆå¦‚è¿­ä»£å™¨ï¼‰ï¼Œé¦–å…ˆåº”è¯¥æƒ³åˆ°ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’çš„è°ƒç”¨è¿‡ç¨‹ã€‚è¿™æ˜¯ä¸€ç§éå¸¸é€šç”¨çš„è½¬æ¢æŠ€å·§ã€‚
3. **è¿­ä»£å™¨è®¾è®¡æ¨¡å¼çš„æœ€ä½³å®è·µ**: â€œåœ¨ `hasNext()` ä¸­å‡†å¤‡æ•°æ®ï¼Œåœ¨ `next()` ä¸­æ¶ˆè´¹æ•°æ®â€æ˜¯ä¸€ç§å¥å£®ã€æ¸…æ™°çš„å®ç°æ¨¡å¼ã€‚å®ƒå°†å¤æ‚çš„é€»è¾‘ï¼ˆæŸ¥æ‰¾ä¸‹ä¸€ä¸ªå…ƒç´ ï¼‰å°è£…åœ¨ `hasNext()` ä¸­ï¼Œä½¿å¾— `next()` çš„å®ç°å˜å¾—å¾®ä¸è¶³é“ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº† `hasNext()` çš„æ­£ç¡®è¡Œä¸ºã€‚
4. **ç†Ÿèƒ½ç”Ÿå·§**: è¿™ç±»é—®é¢˜æœ‰å¾ˆå¼ºçš„æ¨¡å¼æ€§ã€‚å¤šç»ƒä¹ ç±»ä¼¼çš„é¢˜ç›®ï¼Œå¦‚äºŒå‰æ ‘çš„å„ç§è¿­ä»£å¼éå†ï¼ˆå‰åºã€ä¸­åºã€ååºï¼‰ï¼Œå¯ä»¥è®©ä½ å¯¹â€œç”¨æ ˆå®ç°éå†â€çš„æŠ€å·§æ›´åŠ ç†Ÿç»ƒã€‚å½“ä½ çœ‹åˆ°â€œåµŒå¥—â€ã€â€œæ ‘å½¢â€ã€â€œè¿­ä»£å™¨â€ç­‰å…³é”®è¯æ—¶ï¼Œå°±èƒ½è‡ªç„¶åœ°è”æƒ³åˆ°è¿™ä¸ªè§£å†³æ–¹æ¡ˆã€‚

##åµŒå¥—ç»“æ„çš„åºåˆ—åŒ–

è¿™ä¸ªä¸»é¢˜çš„æ ¸å¿ƒæ˜¯å¦‚ä½•å°†å†…å­˜ä¸­çš„ `NestedInteger` å¯¹è±¡**è½¬æ¢**ä¸ºå…¶ç­‰ä»·çš„ã€å¯å­˜å‚¨æˆ–ä¼ è¾“çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚

### é—®é¢˜è¦ç‚¹

**åœºæ™¯:** ç¨‹åºåœ¨å†…å­˜ä¸­æ„å»ºæˆ–æŒæœ‰ä¸€ä¸ª `NestedInteger` å¯¹è±¡ã€‚

**ç›®æ ‡:** å°†è¿™ä¸ªå¯¹è±¡è½¬æ¢æˆä¸€ä¸ªæ ‡å‡†çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œä»¥ä¾¿äºæŒä¹…åŒ–å­˜å‚¨ï¼ˆå­˜å…¥æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰æˆ–é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ã€‚ä¾‹å¦‚ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸² `"[123,[456,[789]]]"`.

### æ ¸å¿ƒæ€æƒ³å’Œå¥—è·¯ - æ·±åº¦ä¼˜å…ˆæœç´¢

**é€’å½’ (Recursion) / æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS):** è¿™æ˜¯å¤„ç†æ ‘çŠ¶æˆ–é€’å½’ç»“æ„è½¬åŒ–çš„æœ€è‡ªç„¶ã€æœ€ç›´è§‚çš„æ–¹æ³•ã€‚

ä»£ç ä¼˜é›…ä¸”é«˜åº¦ç¬¦åˆæ•°æ®ç»“æ„çš„å®šä¹‰ã€‚

**åˆ†æ²» (Divide and Conquer):** è¿™æ˜¯é€’å½’çš„æ ¸å¿ƒã€‚

å°†åºåˆ—åŒ–ä¸€ä¸ªå¤æ‚åˆ—è¡¨çš„é—®é¢˜ï¼Œåˆ†è§£æˆåºåˆ—åŒ–å…¶å†…éƒ¨æ¯ä¸€ä¸ªå­å…ƒç´ ï¼ˆæ— è®ºæ˜¯æ•´æ•°è¿˜æ˜¯å­åˆ—è¡¨ï¼‰çš„å­é—®é¢˜ã€‚

å½“æ‰€æœ‰å­é—®é¢˜è§£å†³åï¼Œå°†ç»“æœæŒ‰ç…§æ ¼å¼ï¼ˆåŠ ä¸Š `[`ã€`,`ã€`]`ï¼‰åˆå¹¶èµ·æ¥ï¼Œå°±è§£å†³äº†åŸé—®é¢˜ã€‚

#### é‡åˆ°æ•´æ•°çš„æƒ…å†µ - ç›´æ¥è½¬åŒ–ä¸ºå­—ç¬¦ä¸²

å½“é‡åˆ°çš„ `NestedInteger` æ˜¯ä¸€ä¸ªæ•´æ•°æ—¶ï¼Œé—®é¢˜æœ€ç®€å•ï¼Œç›´æ¥è½¬ä¸ºå­—ç¬¦ä¸²å³å¯ã€‚

####é‡åˆ°åˆ—è¡¨çš„æƒ…å†µ - é€’å½’å¤„ç†æ‰€æœ‰å…ƒç´ å†åˆå¹¶

å½“é‡åˆ°çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œéœ€è¦å…ˆé€’å½’å¤„ç†åˆ—è¡¨å†…çš„æ‰€æœ‰å…ƒç´ ï¼Œå†ç»„åˆç»“æœã€‚

### å®ç°åŸç†å’Œæ­¥éª¤

å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œä¾‹å¦‚ `String serialize(NestedInteger ni)`ã€‚

####**åˆ¤æ–­ `ni` çš„ç±»å‹:**

- å¦‚æœ `ni.isInteger()` ä¸º `true`ï¼Œç›´æ¥è¿”å›è¯¥æ•´æ•°çš„å­—ç¬¦ä¸²å½¢å¼ `String.valueOf(ni.getInteger())`ã€‚
- è¿™æ˜¯é€’å½’çš„ç»ˆç‚¹ã€‚

####**å¦‚æœ `ni` æ˜¯ä¸€ä¸ªåˆ—è¡¨:**

- åˆ›å»ºä¸€ä¸ª `StringBuilder`ï¼Œé¦–å…ˆæ·»åŠ å·¦æ‹¬å· `[`ã€‚
- éå† `ni.getList()` å¾—åˆ°çš„æ‰€æœ‰å­å…ƒç´  `child`ã€‚
- å¯¹äºæ¯ä¸€ä¸ª `child`ï¼Œ**é€’å½’è°ƒç”¨** `serialize(child)`ï¼Œå°†è¿”å›çš„å­å­—ç¬¦ä¸²æ‹¼æ¥åˆ° `StringBuilder` ä¸­ã€‚
- åœ¨æ‹¼æ¥æ¯ä¸ªå­å­—ç¬¦ä¸²åï¼ˆé™¤äº†æœ€åä¸€ä¸ªï¼‰ï¼Œæ·»åŠ é€—å· `,`ã€‚
- æ‰€æœ‰å­å…ƒç´ å¤„ç†å®Œæ¯•åï¼Œæ·»åŠ å³æ‹¬å· `]`ã€‚

è¿”å› `StringBuilder` ç”Ÿæˆçš„æœ€ç»ˆå­—ç¬¦ä¸²ã€‚

### å®ç°ä»£ç 

```Java
public String serialize(NestedInteger ni){
  if(ni.isInteger()){
    return String.valueOf(ni.getInteger());
  }
  
  StringBuilder sb = new StringBuilder();
  sb.append('[');
  for(NestedInteger nni : ni.getList()){
    sb.append(serialize(nni));
  }
  sb.append("]");
  return sb;
}
```

## åµŒå¥—ç»“æ„çš„ååºåˆ—åŒ– - Leetcode 385

### é—®é¢˜è¦ç‚¹

**åœºæ™¯:** ä»æ–‡ä»¶ã€æ•°æ®åº“æˆ–ç½‘ç»œAPIæ¥æ”¶åˆ°ä¸€ä¸ªç¬¦åˆç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¦‚ `"[123,[456]]"`ã€‚

**ç›®æ ‡:** ç¼–å†™ä¸€ä¸ªè§£æå™¨ (Parser)ï¼Œè¯»å–è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶åœ¨å†…å­˜ä¸­ç²¾ç¡®åœ°é‡å»ºå‡ºä¸ä¹‹å¯¹åº”çš„ `NestedInteger` å¯¹è±¡ç»“æ„ã€‚

### æ ¸å¿ƒæ€æƒ³å’Œåº”å¯¹å¥—è·¯ï¼šæ ˆæˆ–è€…æ·±åº¦ä¼˜å…ˆæœç´¢

#### Option 1: **æ ˆ (Stack) - è¿­ä»£æ³•:**

 å¯¹äºè§£ææ‹¬å·åŒ¹é…ã€å±‚çº§åµŒå¥—è¿™ç±»é—®é¢˜ï¼Œæ ˆæ˜¯éå¸¸å¼ºå¤§ä¸”ç¨³å¥çš„å·¥å…·ã€‚

å®ƒå¯ä»¥æ¸…æ™°åœ°ç®¡ç†å½“å‰çš„åµŒå¥—å±‚çº§ï¼Œå¹¶ä¸”èƒ½æœ‰æ•ˆé¿å…é€’å½’è¿‡æ·±å¯¼è‡´çš„æ ˆæº¢å‡ºã€‚

##### æ ˆçš„ä½œç”¨ï¼šç»´æŠ¤çˆ¶å­å…³ç³»

æ ˆé¡¶å§‹ç»ˆä»£è¡¨æˆ‘ä»¬**å½“å‰æ­£åœ¨å¡«å……çš„é‚£ä¸ªåˆ—è¡¨**ã€‚

#####é‡åˆ° `[` (è¿›å…¥æ·±å±‚)çš„æƒ…å†µ

- åˆ›å»ºä¸€ä¸ªæ–°çš„ç©º**åˆ—è¡¨ç±»å‹**çš„`NestedInteger`

- å°†å®ƒåŠ å…¥åˆ°**æ—§çš„æ ˆé¡¶**çš„NestedIntegerçš„åˆ—è¡¨ï¼ˆçˆ¶åˆ—è¡¨ï¼‰ä¸­
- ç„¶åæŠŠè¿™ä¸ªæ–°åˆ—è¡¨ç±»å‹çš„NestedIntegerå‹å…¥æ ˆï¼Œæˆä¸ºæ–°çš„â€œå½“å‰åˆ—è¡¨â€ã€‚

#####é‡åˆ°`]`(è¿”å›æµ…å±‚)çš„æƒ…å†µ - å¼¹å‡ºæ ˆé¡¶

æ„å‘³ç€**å½“å‰åˆ—è¡¨**å·²ç»å¡«å……å®Œæ¯•ï¼Œä»æ ˆä¸­å¼¹å‡ºå®ƒï¼Œ**æ“ä½œçš„ä¸Šä¸‹æ–‡å°±å›åˆ°äº†å®ƒçš„çˆ¶åˆ—è¡¨**ã€‚

#####é‡åˆ°æ•°å­—çš„æƒ…å†µ

è§£æå‡ºå®Œæ•´çš„æ•°å­—ï¼Œå¹¶æŠŠå®ƒä½œä¸ºä¸€ä¸ª `NestedInteger` æ·»åŠ åˆ°**å½“å‰åˆ—è¡¨**ï¼ˆå³æ ˆé¡¶NestedIntegerçš„åˆ—è¡¨ï¼‰ä¸­ã€‚

#### Option 2: é€’å½’ (Recursion) / DFS: - æŒ‡é’ˆç®¡ç†éœ€è¦å°å¿ƒ

 ä¹Ÿå¯ä»¥é€šè¿‡é€’å½’æ¥è§£æã€‚

å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä»»åŠ¡æ˜¯ä»å­—ç¬¦ä¸²çš„æŸä¸ªä½ç½®å¼€å§‹è§£æå‡ºä¸€ä¸ªå®Œæ•´çš„ `NestedInteger`ã€‚

è¿™ç§æ–¹æ³•åœ¨é€»è¾‘ä¸Šå¾ˆç›´è§‚ï¼Œä½†éœ€è¦ä»”ç»†ç®¡ç†å­—ç¬¦ä¸²çš„è§£æä½ç½®ï¼ˆæŒ‡é’ˆï¼‰ã€‚

### å®ç°åŸç†å’Œæ­¥éª¤ - åŸºäºæ ˆ

#### å¤„ç†è¾¹ç¼˜æƒ…å†µ - ä¸ä»¥`[`å¼€å¤´

å¦‚æœè¾“å…¥å­—ç¬¦ä¸²ä¸ä»¥ `[` å¼€å¤´ï¼ˆä¾‹å¦‚ `"123"`ï¼‰ï¼Œè¯´æ˜å®ƒåªæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•´æ•°ã€‚ç›´æ¥è§£æå®ƒå¹¶æ„å»ºä¸€ä¸ª `NestedInteger` è¿”å›ã€‚

#### åˆå§‹åŒ–æ ˆ

åˆ›å»ºä¸€ä¸ªæ ˆ `stack`ã€‚

åˆ›å»ºä¸€ä¸ªæ ¹ `NestedInteger`ï¼ˆå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼‰ï¼Œå¹¶å°†å…¶å‹å…¥æ ˆä¸­ã€‚

è¿™ä¸ªæ ¹å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦è¿”å›çš„å¯¹è±¡ã€‚

#### åˆå§‹åŒ–startæŒ‡é’ˆ - ç”¨æ¥æ ‡è®°æ•°å­—çš„èµ·å§‹ä½ç½®

startæŒ‡é’ˆæ˜¯æŒæ¡è¿™ç§è¿­ä»£è§£æçš„å…³é”®ã€‚

æˆ‘ä»¬å°†startçœ‹ä½œä¸€ä¸ª**æ ‡è®°**ï¼Œæ ‡è®°ä¸€ä¸ªå¯èƒ½çš„æ•°å­—å¼€å§‹çš„ä½ç½®ã€‚

æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªéå†æŒ‡é’ˆiéå†`s[0...n-1]`ï¼Œæ¯æ¬¡é‡åˆ°ä¸€ä¸ª**ç»ˆç»“ç¬¦**çš„æ—¶å€™ï¼ˆ`,`æˆ–è€…æ˜¯`]`ï¼‰ï¼Œåœ¨ç»ˆç»“ç¬¦çš„ä¸‹ä¸€ä¸ªä½ç½®è®¾ç½®**æ ‡è®°(`i+1`)**ã€‚

ç„¶åæˆ‘ä»¬ç»§ç»­å‰ç§»`i`ï¼Œå½“`i`ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªç»ˆç»“ç¬¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬çœ‹çœ‹`i`å’Œ`start`ä¸­é—´çš„å†…å®¹æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—ã€‚

##### startæŒ‡é’ˆçš„æ ¸å¿ƒèŒè´£ - æ ‡è®°ä¸€ä¸ªæ½œåœ¨æ•°å­—çš„èµ·å§‹ä½ç½®

å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆåœ¨ä½ ç”¨é¼ æ ‡**é€‰ä¸­æ–‡æœ¬**æ—¶çš„é‚£ä¸ª**èµ·å§‹ç‚¹å‡»ä½ç½®**ã€‚

- ä½ æŠŠé¼ æ ‡å…‰æ ‡ç‚¹åœ¨ä¸€ä¸ªåœ°æ–¹ï¼ˆ**`start` æŒ‡é’ˆè¢«è®¾ç½®**ï¼‰ã€‚
- ç„¶åä½ æ‹–åŠ¨é¼ æ ‡åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼ˆ**`i` æŒ‡é’ˆåœ¨å¾ªç¯ä¸­ç§»åŠ¨**ï¼‰ã€‚
- å½“ä½ æ¾å¼€é¼ æ ‡æ—¶ï¼Œä½ å°±é€‰ä¸­äº†ä¸€æ®µæ–‡æœ¬ï¼ˆ**`s.substring(start, i)`**ï¼‰ã€‚

åœ¨æˆ‘ä»¬çš„ç®—æ³•é‡Œï¼Œæˆ‘ä»¬å°±æ˜¯æƒ³ç”¨ `(start, i)` è¿™å¯¹æŒ‡é’ˆæ¥â€œé€‰ä¸­â€ä¸€ä¸ªå®Œæ•´çš„æ•°å­—å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ `"123"`ã€‚

##### startæŒ‡é’ˆçš„å·¥ä½œåŸç†ï¼šæ ‡è®°-æ‰«æ-æ”¶è·-é‡ç½®

`start` æŒ‡é’ˆçš„å·¥ä½œæ–¹å¼å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€ä¸ªç®€å•çš„å¾ªç¯ï¼šâ€œ**æ ‡è®° -> æ‰«æ -> æ”¶è·ä¸é‡ç½®**â€ã€‚

###### æˆªæ–­ä¸€ï¼šæ ‡è®°æ•°å­—å¯èƒ½çš„èµ·å§‹ä½ç½®

- æ•´ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå·¦æ‹¬å· `[` ä¹‹åã€‚

- æˆ–è€…ï¼Œä¸€ä¸ªé€—å· `,` ä¹‹åã€‚

- æˆ–è€…ï¼Œä¸€ä¸ªå¼€å¯æ–°åˆ—è¡¨çš„å·¦æ‹¬å· `[` ä¹‹åã€‚

åœ¨è¿™äº›ä½ç½®ï¼Œæˆ‘ä»¬**æœŸæœ›**æ¥ä¸‹æ¥ä¼šé‡åˆ°ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œæ”¾ä¸‹ä¸€ä¸ªâ€œä¹¦ç­¾â€ï¼Œä¹Ÿå°±æ˜¯è®¾ç½® `start` çš„å€¼ã€‚

###### é˜¶æ®µäºŒï¼š æ‰«æåé¢çš„å†…å®¹

ä¸€æ—¦ `start` è¢«è®¾ç½®ï¼Œå®ƒå°±**ä¿æŒä¸åŠ¨**ã€‚

ä¸æ­¤åŒæ—¶ï¼Œä¸»å¾ªç¯çš„ `i` æŒ‡é’ˆä¼šä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°å‘åç§»åŠ¨ã€‚

è¿™ä¸ªè¿‡ç¨‹å°±åƒæ˜¯æˆ‘ä»¬çš„â€œçœ¼ç›â€åœ¨æ‰«æå­—ç¬¦ä¸²ï¼Œå¯»æ‰¾è¿™ä¸ªæ•°å­—çš„**ç»“æŸè¾¹ç•Œ**ã€‚

###### é˜¶æ®µä¸‰ï¼šæ”¶è·ä¸é‡ç½®

å½“ `i` æŒ‡é’ˆé‡åˆ°ä¸€ä¸ª**ç»ˆç»“ç¬¦**ï¼ˆä¹Ÿå°±æ˜¯ `,` æˆ–è€… `]`ï¼‰æ—¶ï¼Œâ€œæ‰«æâ€é˜¶æ®µç»“æŸã€‚

è¿™æ—¶ï¼Œæˆ‘ä»¬å°±çŸ¥é“ä¸€ä¸ªæ•°å­—ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰çš„èŒƒå›´å·²ç»è¢«å®Œæ•´åœ°ç¡®å®šäº†ã€‚

**æ”¶è·ï¼š**

æˆ‘ä»¬æŸ¥çœ‹ä» `start` åˆ° `i` çš„è¿™æ®µå­å­—ç¬¦ä¸² `s.substring(start, i)`ã€‚

å¦‚æœè¿™æ®µä¸ä¸ºç©ºï¼ˆå³ `i > start`ï¼‰ï¼Œæˆ‘ä»¬å°±â€œæ”¶è·â€å®ƒï¼šå°†å…¶è§£ææˆä¸€ä¸ªæ•´æ•°ï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„ `NestedInteger` å¯¹è±¡ã€‚

**é‡ç½®ï¼š**

æ”¶è·å®Œæ¯•åï¼Œè¿™ä¸ªæ•°å­—çš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚

æˆ‘ä»¬å¿…é¡»ä¸º**ä¸‹ä¸€ä¸ª**æ½œåœ¨çš„æ•°å­—åšå‡†å¤‡ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬æŠŠ `start` æŒ‡é’ˆâ€œé‡ç½®â€æˆ–â€œæ›´æ–°â€åˆ°ç»ˆç»“ç¬¦ä¹‹åçš„ä½ç½®ï¼Œå³ `i + 1`ã€‚

è¿™åˆå›åˆ°äº†é˜¶æ®µä¸€ï¼Œå¼€å§‹ä¸€ä¸ªæ–°çš„å¾ªç¯ã€‚

##### startæŒ‡é’ˆçš„åˆå§‹åŒ–å·¥ä½œ

æˆ‘ä»¬åœ¨ä¸€å¼€å§‹å°†startæŒ‡é’ˆçš„å€¼è®¾ç½®ä¸º0å³å¯ã€‚

#### éå†å­—ç¬¦ä¸²

ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆ `i` éå†å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ç”¨å¦ä¸€ä¸ªæŒ‡é’ˆ `start` æ ‡è®°ä¸€ä¸ªæ•°å­—çš„**èµ·å§‹ä½ç½®**ã€‚

##### é‡åˆ°`[`çš„æƒ…å†µ

- åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ `newList`ã€‚

- å°† `newList` æ·»åŠ åˆ°å½“å‰æ ˆé¡¶åˆ—è¡¨ `stack.peek()` ä¸­ã€‚

- å°† `newList` å‹å…¥æ ˆ `stack.push(newList)`ã€‚

- æ›´æ–°æ•°å­—èµ·å§‹æŒ‡é’ˆ `start = i + 1`ã€‚

##### é‡åˆ°`,`æˆ–è€…`]`çš„æƒ…å†µ

æ— è®ºæ˜¯é€—å· `,` è¿˜æ˜¯å³æ‹¬å· `]`ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ª**å…±åŒçš„èŒè´£**ï¼š**ç»ˆç»“ï¼ˆTerminateï¼‰**å‰é¢å¯èƒ½å­˜åœ¨çš„æ•°å­—ã€‚

å½“ä½ éå†å­—ç¬¦ä¸²æ—¶ï¼Œä½ ç”¨ `start` æŒ‡é’ˆæ ‡è®°ä¸€ä¸ªæ½œåœ¨æ•°å­—çš„å¼€å§‹ã€‚

å½“ä½ é‡åˆ°ä¸€ä¸ªéæ•°å­—å­—ç¬¦æ—¶ï¼Œä½ å°±çŸ¥é“è¿™ä¸ªæ•°å­—ç»“æŸäº†ï¼Œæ­¤æ—¶éœ€è¦è¿›è¡Œè§£æã€‚

- é€—å· `,` çš„å”¯ä¸€ä½œç”¨å°±æ˜¯**ç»ˆç»“æ•°å­—**ã€‚
- å³æ‹¬å· `]` æœ‰**ä¸¤ä¸ªä½œç”¨**ï¼š
  - ç»ˆç»“å®ƒå‰é¢å¯èƒ½å­˜åœ¨çš„æœ€åä¸€ä¸ªæ•°å­—ï¼ˆå’Œé€—å·çš„ä½œç”¨ä¸€æ ·ï¼‰ã€‚
  - å…³é—­å½“å‰çš„åˆ—è¡¨å±‚çº§ï¼ˆä»æ ˆä¸­å¼¹å‡ºï¼‰ã€‚

å› æ­¤æˆ‘ä»¬é‡‡å–å¦‚ä¸‹çš„æ“ä½œï¼š

###### ç¬¬ä¸€æ­¥ï¼ˆå…¬å…±èŒè´£ï¼‰ï¼šæ£€æŸ¥å¹¶è§£ææ•°å­—

- åˆ¤æ–­ `i > start` æ˜¯å¦æˆç«‹ã€‚

- å¦‚æœæˆç«‹ï¼Œè¯´æ˜ä» `start`åˆ° `i`ä¹‹é—´æœ‰ä¸€ä¸ªæ•°å­—ã€‚

- æˆªå– `s.substring(start, i)`ï¼Œè§£ææˆæ•´æ•°ã€‚

- åˆ›å»ºä¸€ä¸ª `NestedInteger` å¹¶å°†å…¶æ·»åŠ åˆ°å½“å‰æ ˆé¡¶çš„åˆ—è¡¨ä¸­ï¼š`stack.peek().add(new NestedInteger(num))`ã€‚

###### ç¬¬äºŒéƒ¨(`]`çš„é¢å¤–èŒè´£)ï¼šå…³é—­åˆ—è¡¨

**ä»…å½“ `c` æ˜¯ `]` æ—¶**ï¼Œä»æ ˆä¸­å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼š`stack.pop()`ã€‚

###### ç¬¬ä¸‰æ­¥ï¼ˆæ›´æ–°startæŒ‡é’ˆï¼‰ï¼š

æ›´æ–°æ•°å­—çš„èµ·å§‹ç‚¹ï¼š`start = i + 1`ã€‚



##### é‡åˆ°`]`çš„æƒ…å†µ

ä»æ ˆä¸­å¼¹å‡ºæ ˆé¡¶åˆ—è¡¨ `stack.pop()`ï¼Œè¡¨ç¤ºè¿™ä¸€å±‚çš„æ„å»ºå·¥ä½œå®Œæˆã€‚

### å®ç°ä»£ç 

```Java
/**
 * // This is the interface that allows for creating nested lists.
 * // You should not implement it, or speculate about its implementation
 * public interface NestedInteger {
 *     // Constructor initializes an empty nested list.
 *     public NestedInteger();
 *
 *     // Constructor initializes a single integer.
 *     public NestedInteger(int value);
 *
 *     // @return true if this NestedInteger holds a single integer, rather than a nested list.
 *     public boolean isInteger();
 *
 *     // @return the single integer that this NestedInteger holds, if it holds a single integer
 *     // Return null if this NestedInteger holds a nested list
 *     public Integer getInteger();
 *
 *     // Set this NestedInteger to hold a single integer.
 *     public void setInteger(int value);
 *
 *     // Set this NestedInteger to hold a nested list and adds a nested integer to it.
 *     public void add(NestedInteger ni);
 *
 *     // @return the nested list that this NestedInteger holds, if it holds a nested list
 *     // Return empty list if this NestedInteger holds a single integer
 *     public List<NestedInteger> getList();
 * }
 */
class Solution {
    public NestedInteger deserialize(String s) {
    if(!s.startsWith("[")) return new NestedInteger(Integer.valueOf(s));

    Stack<NestedInteger> stack = new Stack<>();
    NestedInteger result = new NestedInteger();
    stack.push(result);
    int start = 1;

    for(int i = 1; i < s.length(); i++){
        char c = s.charAt(i);
        if(c == '['){
            NestedInteger ni = new NestedInteger();
            stack.peek().add(ni);
            stack.push(ni);
            start = i+1;
        }else if(c ==',' || c == ']'){
            if(i > start){
                int val = Integer.valueOf(s.substring(start,i));
                NestedInteger ni = new NestedInteger(val);
                stack.peek().add(ni);
            }
            if( c== ']' && stack.size() > 1){
                stack.pop();
            }
            start = i + 1;
        }
    }
    return result;
    }
     
}
```

