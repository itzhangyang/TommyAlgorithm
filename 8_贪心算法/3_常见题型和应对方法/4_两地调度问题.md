# 两地调度问题

| Item     | Value                                           | Comments |
| -------- | ----------------------------------------------- | -------- |
| 场景描述 | 将2n人分配到两个城市，费用最小                  |          |
| 排序逻辑 | 按照`cost[i][0]-cost[i][1]`差值升序排列         |          |
| 选择逻辑 | 将差值小的优先分配到费用低的城市                |          |
| 实现原理 | 排序后，前一半去A，后一半去B,就实现了最小总开销 |          |
| Leetcode | 1029                                            |          |

##Leetcode 1029 两地调度

你有 `2n` 个人，每个人去 A 市或 B 市都会产生一定的费用。

每个人只能去其中一个城市。
你需要选出 **恰好 n 个人去 A 市，n 个人去 B 市**，让总的费用最小。

###问题分析

####关键转化 - 先假设都去A

对于每一个人`i`，分别有：

- 去城市A的费用是`costA[i]`
- 去城市B的费用`costB[i]`

我们假设**所有人都去A市**,计算出总花费`totalCost = sum(costA[i]`

然后我们从中选出`n`个人改去B市，并使得总成本最小

####更节省的概念 - 谁去B更便宜？

那么我们只需要跳出去B市更划算的人。

对于每一个人，我们计算出去B市比去A市能够节省多少：

`delta[i] = costB[i] - costA[i]`

如果`delta[i]<0`则代表去B市更划算。

####排序逻辑 - 按照costB - costA排序

我们将所有人按照`delta`从小到大排序

```
越早出现的人，越应该去B市
越后出现的人，越应该去A市
```

然后从排序列表中，挑选出前`n`个人去B市，其余`n`人去A市。

因为我们只允许一半人去 B 市，**贪心地挑出“最适合去 B 市”的前 n 个人**可以确保全局最优。

####选择逻辑

- 排序后前 `n` 个人：选去 B 市（更划算）
- 后 `n` 个人：选去 A 市（相对划算）

###实现代码

```java
public int twoCitySchedCost(int[][] costs) {
        // 按 delta = costB - costA 升序排序
        Arrays.sort(costs, (a, b) -> (a[1] - a[0]) - (b[1] - b[0]));
        
        int n = costs.length / 2;
        int totalCost = 0;
        
        // 前 n 人去 B 市，后 n 人去 A 市
        for (int i = 0; i < n; i++) {
            totalCost += costs[i][1]; // cost to B
        }
        for (int i = n; i < 2 * n; i++) {
            totalCost += costs[i][0]; // cost to A
        }
        
        return totalCost;
    }
```

####注意事项

1. **排序方式很关键**，必须按 `(B - A)` 升序（节省值排序）。
2. 不能选错人数：确保一半去 A，一半去 B。
3. `delta` 可正可负，排序后表示相对优势，而非绝对优势。
4. 注意题目一定是 `2n` 人，否则方法不成立。

###经验总结

| 点位       | 内容                                      |
| ---------- | ----------------------------------------- |
| 🎯 问题本质 | 在满足数量约束下最小化总成本。            |
| 💡 贪心策略 | 假设全去 A，挑 n 个最适合去 B 的人。      |
| 🔀 排序逻辑 | 按 delta = costB - costA 升序排列。       |
| ✅ 选择逻辑 | 排序前 n 个去 B，剩下去 A。               |
| ⚠️ 注意事项 | 排序的方向、人数严格对半、delta可正可负。 |
| 💬 类似问题 | 可以推广到“挑出k个人换方向”的变体题。     |

### 